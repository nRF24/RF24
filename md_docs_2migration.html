<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Optimized high speed nRF24L01+ driver class documentation: Migration guide</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Optimized high speed nRF24L01+ driver class documentation<span id="projectnumber">&#160;v1.5.0</span>
   </div>
   <div id="projectbrief">TMRh20 2020 - Optimized fork of the nRF24L01+ driver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Migration guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md234">isAckPayloadAvailable()</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md235">64-bit integer addresses</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md236">isFifo(bool, bool)</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md237">maskIRQ()</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md238">whatHappened()</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md239">openWritingPipe(const uint8_t*)</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="autotoc_md233"></a></p>
<p>This is a collection of snippets that highlight preferred API over the deprecated original API.</p>
<h1><a class="anchor" id="autotoc_md234"></a>
isAckPayloadAvailable()</h1>
<blockquote class="doxtable">
<p><b>Deprecated since v1.4.2</b> </p>
</blockquote>
<p>This function is equivalent to <code><a class="el" href="classRF24.html#a127105eb7a3b351cfe777c1cec50627a">RF24::available()</a></code>. Any use of <code><a class="el" href="classRF24.html#a30c2736fd0df9c8128cef408c8b88e92">RF24::isAckPayloadAvailable()</a></code> is interchangeable with <code><a class="el" href="classRF24.html#a127105eb7a3b351cfe777c1cec50627a">RF24::available()</a></code>.</p>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> radio.isAckPayloadAvailable() { <span class="comment">/* .. */</span> }</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> radio.available() { <span class="comment">/* .. */</span> }</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md235"></a>
64-bit integer addresses</h1>
<p>Any function that accept an address in the form of <code>uint64_t</code> is discouraged. This includes</p>
<ul>
<li><code><a class="el" href="classRF24.html#aa7e8523f86f9f8f20c274e0c89a5fd45">RF24::openReadingPipe(uint8_t, uint64_t)</a></code> <blockquote class="doxtable">
<p><b>Deprecated since v1.3.11</b> </p>
</blockquote>
</li>
<li><code><a class="el" href="classRF24.html#a50c8e68ee840e1860a31dbdc83afbd77">RF24::openWritingPipe(uint64_t)</a></code> <blockquote class="doxtable">
<p><b>Deprecated since v1.3.11</b> </p>
</blockquote>
</li>
<li><code><a class="el" href="classRF24.html#a34dfbee401ffb8d4574f49bacb2650af">RF24::stopListening(const uint64_t)</a></code> <blockquote class="doxtable">
<p><b>Deprecated since v1.5</b> </p>
</blockquote>
</li>
</ul>
<p>These functions' address parameter use a 64-bit unsigned integer (<code>uint64_t</code>). The nRF24L01 can only use up to 40 bit addresses. Thus, there is an unused 24 bits being allocated for addresses using these functions.</p>
<p>There are overloaded functions that use a buffer instead:</p>
<ul>
<li><code><a class="el" href="classRF24.html#a9edc910ccc1ffcff56814b08faca5535">RF24::openReadingPipe(uint8_t, const uint8_t*)</a></code></li>
<li><code><a class="el" href="classRF24.html#af2e409e62d49a23e372a70b904ae30e1">RF24::openWritingPipe(const uint8_t*)</a></code></li>
<li><code><a class="el" href="classRF24.html#a0048dd9ac89146afb641b93be44c0105" title="Similar to startListening(void) but changes the TX address.">RF24::stopListening(const uint8_t*)</a></code></li>
</ul>
<p>These eliminate the unnecessary 24 bits by only using the length of the buffer (<code>uint8_t*</code>) specified by <code><a class="el" href="classRF24.html#ad5aea7f9a3bd9c7d357fb296ce751f21">RF24::setAddressWidth()</a></code>.</p>
<dl class="section see"><dt>See also</dt><dd>The <code><a class="el" href="classRF24.html#af2e409e62d49a23e372a70b904ae30e1">RF24::openWritingPipe(const uint8_t*)</a></code> is now deprecated in favor of the overloaded <code><a class="el" href="classRF24.html#a0048dd9ac89146afb641b93be44c0105" title="Similar to startListening(void) but changes the TX address.">RF24::stopListening(const uint8_t*)</a></code> function. See the section below for more detail.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>The endianness (byte order) of a buffer is reversed compared to a 64-bit integer. <div class="fragment"><div class="line">uint64_t address = 0xB3B4B5B6C2;</div>
<div class="line"><span class="comment">// is the same address as</span></div>
<div class="line">uint8_t address[5] = {0xC2, 0xB6, 0xB5, 0xB4, 0xB3};</div>
</div><!-- fragment --> Notice the MSB (Most Significant Byte) <code>0xC2</code> is last in the integer but first in the buffer.</dd></dl>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line">uint64_t address = 0xB3B4B5B6C2;</div>
<div class="line">radio.openReadingPipe(1, address);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line">uint8_t address[5] = {0xC2, 0xB6, 0xB5, 0xB4, 0xB3};</div>
<div class="line">radio.openReadingPipe(1, address);</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Our examples actually use a C-string casted as an array of 6 bytes. That's because a C-string (<code>char*</code>) must be NULL terminated (<code>\0</code> at the end) in memory. <div class="fragment"><div class="line">uint8_t address[][6] = { <span class="stringliteral">&quot;1Node&quot;</span>, <span class="stringliteral">&quot;2Node&quot;</span> };</div>
<div class="line"><span class="comment">// is equivalent to</span></div>
<div class="line">uint8_t address[][6] = { { <span class="charliteral">&#39;1&#39;</span>, <span class="charliteral">&#39;N&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span> },</div>
<div class="line">                         { <span class="charliteral">&#39;2&#39;</span>, <span class="charliteral">&#39;N&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span> } };</div>
</div><!-- fragment --></dd></dl>
<h1><a class="anchor" id="autotoc_md236"></a>
isFifo(bool, bool)</h1>
<blockquote class="doxtable">
<p><b>Deprecated since v1.4.11</b> </p>
</blockquote>
<p>Introduced as a compliment to <code><a class="el" href="classRF24.html#a3a8f59300acef72629860bb7582750f3">RF24::isFifo(bool)</a></code> in v1.4.3, this function was supposed to provide a specific detail about a specified radio's FIFO. However, it was discovered that the function may not highlight binary corruption (<code>RF24_FIFO_INVALID</code>) observed in the SPI bus' MISO line.</p>
<p>A fix was introduced using enumerated values of <code><a class="el" href="group__fifoState.html#gabdb20825adc8d165b575f638004e29de">rf24_fifo_state_e</a></code>. Since then, <code><a class="el" href="classRF24.html#a3a8f59300acef72629860bb7582750f3">RF24::isFifo(bool)</a></code> is now preferred as it accurately describes the result.</p>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> rxFifoEmpty = radio.isFifo(<span class="keyword">false</span>, <span class="keyword">true</span>);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> rxFifoEmpty = radio.isFifo(<span class="keyword">false</span>) == <a class="code hl_enumvalue" href="group__fifoState.html#ggabdb20825adc8d165b575f638004e29dead8ca86c767581936500d156569791b45">RF24_FIFO_EMPTY</a>;</div>
<div class="ttc" id="agroup__fifoState_html_ggabdb20825adc8d165b575f638004e29dead8ca86c767581936500d156569791b45"><div class="ttname"><a href="group__fifoState.html#ggabdb20825adc8d165b575f638004e29dead8ca86c767581936500d156569791b45">RF24_FIFO_EMPTY</a></div><div class="ttdeci">@ RF24_FIFO_EMPTY</div><div class="ttdoc">The FIFO is empty.</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00124">RF24.h:124</a></div></div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md237"></a>
maskIRQ()</h1>
<blockquote class="doxtable">
<p><b>Deprecated since v1.5</b> </p>
</blockquote>
<p>Originally <code><a class="el" href="classRF24.html#abf68b9b0c9cd17179e9e144c3e7f9c45">RF24::maskIRQ()</a></code> was the only function provided to influence the radio's IRQ pin. However, the 3 required boolean parameters made this prone to bugs in user code. The parameters' meaning was confusingly reversed, and they were easily misplaced in the wrong order.</p>
<p>A better approach was introduced with <code><a class="el" href="group__StatusFlags.html#gad009373a979040fd7cfb6ec0eac59739">RF24::setStatusFlags()</a></code>. It's 1 parameter accepts values defined by the <code><a class="el" href="group__StatusFlags.html#gaa53ae58128004efa6cedb4dd1cbe10f6" title="An enumeration of constants used to configure Status flags.">rf24_irq_flags_e</a></code> enumerated constants. These constant values specify individual events; they can also be OR'd together to specify multiple events.</p>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="comment">// IRQ pin only activated by &quot;RX Data Ready&quot; event</span></div>
<div class="line">radio.maskIRQ(1, 1, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin activated by &quot;TX Data Sent&quot; and TX Data Failed&quot; events</span></div>
<div class="line">radio.maskIRQ(0, 0, 1);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin activated by all events</span></div>
<div class="line">radio.maskIRQ(0, 0, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin disabled</span></div>
<div class="line">radio.maskIRQ(1, 1, 1);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="comment">// IRQ pin only activated by &quot;RX Data Ready&quot; event</span></div>
<div class="line">radio.setStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a7482cc25ce6ce33646452ac3afc3817b">RF24_RX_DR</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin activated by &quot;TX Data Sent&quot; and TX Data Failed&quot; events</span></div>
<div class="line">radio.setStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a109177accb6d45f87320b85f8d51d076">RF24_TX_DS</a> | <a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c8ae313ad46d234250fb369102cd70a">RF24_TX_DF</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin activated by all events</span></div>
<div class="line">radio.setStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a9cefc3205722f973f5e4c9d27e5284a5">RF24_IRQ_ALL</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IRQ pin disabled</span></div>
<div class="line">radio.setStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c3d4a125f341825e1da68e238df1078">RF24_IRQ_NONE</a>);</div>
<div class="line"><span class="comment">// or equivalently</span></div>
<div class="line">radio.setStatusFlags();</div>
<div class="ttc" id="agroup__StatusFlags_html_ggaa53ae58128004efa6cedb4dd1cbe10f6a109177accb6d45f87320b85f8d51d076"><div class="ttname"><a href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a109177accb6d45f87320b85f8d51d076">RF24_TX_DS</a></div><div class="ttdeci">@ RF24_TX_DS</div><div class="ttdoc">Represents an event where TX Data Sent successfully.</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00277">RF24.h:277</a></div></div>
<div class="ttc" id="agroup__StatusFlags_html_ggaa53ae58128004efa6cedb4dd1cbe10f6a4c3d4a125f341825e1da68e238df1078"><div class="ttname"><a href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c3d4a125f341825e1da68e238df1078">RF24_IRQ_NONE</a></div><div class="ttdeci">@ RF24_IRQ_NONE</div><div class="ttdoc">An alias of 0 to describe no IRQ events enabled.</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00273">RF24.h:273</a></div></div>
<div class="ttc" id="agroup__StatusFlags_html_ggaa53ae58128004efa6cedb4dd1cbe10f6a4c8ae313ad46d234250fb369102cd70a"><div class="ttname"><a href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c8ae313ad46d234250fb369102cd70a">RF24_TX_DF</a></div><div class="ttdeci">@ RF24_TX_DF</div><div class="ttdoc">Represents an event where TX Data Failed to send.</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00275">RF24.h:275</a></div></div>
<div class="ttc" id="agroup__StatusFlags_html_ggaa53ae58128004efa6cedb4dd1cbe10f6a7482cc25ce6ce33646452ac3afc3817b"><div class="ttname"><a href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a7482cc25ce6ce33646452ac3afc3817b">RF24_RX_DR</a></div><div class="ttdeci">@ RF24_RX_DR</div><div class="ttdoc">Represents an event where RX Data is Ready to RF24::read().</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00279">RF24.h:279</a></div></div>
<div class="ttc" id="agroup__StatusFlags_html_ggaa53ae58128004efa6cedb4dd1cbe10f6a9cefc3205722f973f5e4c9d27e5284a5"><div class="ttname"><a href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a9cefc3205722f973f5e4c9d27e5284a5">RF24_IRQ_ALL</a></div><div class="ttdeci">@ RF24_IRQ_ALL</div><div class="ttdoc">Equivalent to RF24_RX_DR | RF24_TX_DS | RF24_TX_DF.</div><div class="ttdef"><b>Definition</b> <a href="RF24_8h_source.html#l00281">RF24.h:281</a></div></div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md238"></a>
whatHappened()</h1>
<blockquote class="doxtable">
<p><b>Deprecated since v1.5</b> </p>
</blockquote>
<p>Originally, <code><a class="el" href="classRF24.html#afb97dc4bdf4d2d84ea44060ac5b4ed89">RF24::whatHappened()</a></code> was the only way to clear the events that triggered the IRQ pin. Like <code>maskIRQ()</code>, this was also prone to bugs because of the 3 required boolean parameters (passed by reference).</p>
<p>The aptly named <code><a class="el" href="group__StatusFlags.html#ga5f7da2bb6e33414a559cbc23843e248d">RF24::clearStatusFlags()</a></code> is designed to be a replacement for <code><a class="el" href="classRF24.html#afb97dc4bdf4d2d84ea44060ac5b4ed89">RF24::whatHappened()</a></code>. Like <code><a class="el" href="group__StatusFlags.html#ga5f7da2bb6e33414a559cbc23843e248d">RF24::clearStatusFlags()</a></code>, <code><a class="el" href="group__StatusFlags.html#gad009373a979040fd7cfb6ec0eac59739">RF24::setStatusFlags()</a></code> takes 1 parameter whose value is defined by the <code><a class="el" href="group__StatusFlags.html#gaa53ae58128004efa6cedb4dd1cbe10f6" title="An enumeration of constants used to configure Status flags.">rf24_irq_flags_e</a></code> enumerated constants. These constant values specify individual flags; they can also be OR'd together to specify multiple flags.</p>
<p>Additionally, <code><a class="el" href="group__StatusFlags.html#ga5f7da2bb6e33414a559cbc23843e248d">RF24::clearStatusFlags()</a></code> returns the STATUS byte containing the flags that caused the IRQ pin to go active LOW. This allows the user code to allocate less memory when diagnosing the IRQ pin's meaning.</p>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> tx_ds, tx_df, rx_dr;</div>
<div class="line">radio.whatHappened(tx_ds, tx_df, rx_dr);</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line">uint8_t flags = radio.clearStatusFlags();</div>
<div class="line"><span class="comment">// or equivalently</span></div>
<div class="line">uint8_t flags = radio.clearStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a9cefc3205722f973f5e4c9d27e5284a5">RF24_IRQ_ALL</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// focus on the events you care about</span></div>
<div class="line"><span class="keywordflow">if</span> (flags &amp; <a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a109177accb6d45f87320b85f8d51d076">RF24_TX_DS</a>) { <span class="comment">/* TX data sent */</span> }</div>
<div class="line"><span class="keywordflow">if</span> (flags &amp; <a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c8ae313ad46d234250fb369102cd70a">RF24_TX_DF</a>) { <span class="comment">/* TX data failed to send */</span> }</div>
<div class="line"><span class="keywordflow">if</span> (flags &amp; <a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a7482cc25ce6ce33646452ac3afc3817b">RF24_RX_DR</a>) { <span class="comment">/* RX data is in the RX FIFO */</span> }</div>
<div class="line"> </div>
<div class="line"><span class="comment">// only clear the &quot;TX Data Sent&quot; and TX Data Failed&quot; events</span></div>
<div class="line">radio.clearStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a109177accb6d45f87320b85f8d51d076">RF24_TX_DS</a> | <a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a4c8ae313ad46d234250fb369102cd70a">RF24_TX_DF</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// only clear the &quot;RX Data Ready&quot; event</span></div>
<div class="line">radio.clearStatusFlags(<a class="code hl_enumvalue" href="group__StatusFlags.html#ggaa53ae58128004efa6cedb4dd1cbe10f6a7482cc25ce6ce33646452ac3afc3817b">RF24_RX_DR</a>);</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="autotoc_md239"></a>
openWritingPipe(const uint8_t*)</h1>
<blockquote class="doxtable">
<p>Deprecated since v1.5 </p>
</blockquote>
<p>Originally, <code><a class="el" href="classRF24.html#af2e409e62d49a23e372a70b904ae30e1">RF24::openWritingPipe(const uint8_t*)</a></code> was just a compliment to <code><a class="el" href="classRF24.html#a9edc910ccc1ffcff56814b08faca5535">RF24::openReadingPipe()</a></code>. It changes the address on pipe 0 because that is the only pipe that can be used for transmitting.</p>
<p>Unfortunately, there was a bug that prevented the given TX address from being persistent on pipe 0 if the user code also set an RX address to pipe 0. This bug would surface when switching between RX mode and TX mode (via <code><a class="el" href="classRF24.html#a30a2733a3889bdc331fe2d2f4f0f7b39">RF24::startListening()</a></code> and <code><a class="el" href="classRF24.html#a6f144d73fc447c8ac2d1a4166210fd88">RF24::stopListening()</a></code> respectively) or after <code><a class="el" href="classRF24.html#a38fa92d612b7b9b8a739a68ed7d88330">RF24::stopConstCarrier()</a></code> (if <code><a class="el" href="classRF24.html#a62846750b82682beb7593719eb60ed60">RF24::isPVariant()</a></code> returns <code>true</code>).</p>
<p>The solution is to cache the TX address on the <code><a class="el" href="classRF24.html" title="Driver class for nRF24L01(+) 2.4GHz Wireless Transceiver.">RF24</a></code> instance. Consequently, this solution did not fit well with the traditional order of functions used to set up the radio's TX or RX mode.</p>
<p>By overloading <code><a class="el" href="classRF24.html#a0048dd9ac89146afb641b93be44c0105" title="Similar to startListening(void) but changes the TX address.">RF24::stopListening(const uint8_t*)</a></code>, we are able to ensure proper radio setup without requiring certain functions are called in a certain order.</p>
<ul>
<li>Use <code><a class="el" href="classRF24.html#a0048dd9ac89146afb641b93be44c0105" title="Similar to startListening(void) but changes the TX address.">RF24::stopListening(const uint8_t*)</a></code> to set the TX address and enter inactive TX mode. <code><a class="el" href="classRF24.html#a9edc910ccc1ffcff56814b08faca5535">RF24::openReadingPipe()</a></code> can now (as of v1.5) be used in TX mode without consequence.</li>
<li>Use <code><a class="el" href="classRF24.html#a6f144d73fc447c8ac2d1a4166210fd88">RF24::stopListening()</a></code> to enter inactive TX mode without changing the TX address.</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>Avoid using pipe 0 for RX operations to improve performance and reliability. <br  />
<br  />
 For implementation detail, see the source for <code><a class="el" href="classRF24.html#a9edc910ccc1ffcff56814b08faca5535">RF24::openReadingPipe()</a></code> and <code><a class="el" href="classRF24.html#a6f144d73fc447c8ac2d1a4166210fd88">RF24::stopListening()</a></code>. Ultimately, the datasheet's Appendix A has a detailed example outlining the order of a proper radio setup.</dd></dl>
<table class="doxtable">
<tr>
<th>Old </th><th>New (supported) </th></tr>
<tr>
<td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="comment">// set TX address (pipe 0)</span></div>
<div class="line">radio.openWritingPipe(tx_address);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// set RX address (pipe 1)</span></div>
<div class="line">radio.openReadingPipe(1, rx_address);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// idle radio using inactive TX mode</span></div>
<div class="line">radio.stopListening();</div>
</div><!-- fragment --><p class="endtd"></p>
</td><td><p class="starttd"></p>
<div class="fragment"><div class="line"><span class="comment">// set TX address (pipe 0)</span></div>
<div class="line">radio.stopListening(tx_address); <span class="comment">// enters inactive TX mode</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// set RX address (pipe 1)</span></div>
<div class="line">radio.openReadingPipe(1, rx_address);</div>
</div><!-- fragment --><p class="endtd"></p>
</td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 4 2025 for Optimized high speed nRF24L01+ driver class documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
